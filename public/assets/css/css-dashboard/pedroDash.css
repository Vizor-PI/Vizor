/* --- CSS INJETADO PARA O DASHBOARD FUNCIONAR --- */
    
    /* Reset básico para garantir o layout full screen */
    * { box-sizing: border-box; font-family: "Akatab", sans-serif; }
    body { margin: 0; padding: 0; background: #061722; color: #fff; height: 100vh; display: flex; overflow: hidden; }
    
    /* Layout Principal */
    #navbarConstructor { flex-shrink: 0; height: 100vh; z-index: 1000; }
    .main-content { flex: 1; height: 100vh; overflow-y: auto; padding: 24px 32px; background: radial-gradient(circle at top left, #081e2e 0%, #061722 40%); }

    /* Utilitários de Texto */
    .page-header { margin-bottom: 30px; }
    .page-title { margin: 0; font-size: 24px; color: #fff; }
    .page-sub { color: rgba(255,255,255,0.5); font-size: 13px; }

    /* Inputs & Selects (Correção de fundo branco) */
    .vizor-input, .vizor-select { padding: 10px 16px; border-radius: 8px; background: #041018; border: 1px solid rgba(255,255,255,0.1); color: #fff; outline: none; font-size: 14px; transition: border 0.2s; }
    .vizor-select option { background-color: #061722; color: #fff; padding: 10px; }

    /* Cards */
    .card { background-color: #072135; border-radius: 16px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 20px; position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .card-header { padding: 16px 24px; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center; }
    .card-title { color: aqua; font-size: 18px; margin: 0; font-weight: 700; display: flex; align-items: center; gap: 10px; }
    .card-content { padding: 24px; }

    /* KPIs */
    .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 24px; }
    .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
    .kpi-item { text-align: center; position: relative; }
    .kpi-item:not(:last-child)::after { content: ''; position: absolute; right: 0; top: 10%; height: 80%; width: 1px; background: rgba(255,255,255,0.05); }
    .kpi-label { color: rgba(255,255,255,0.6); font-size: 11px; font-weight: 700; text-transform: uppercase; margin-bottom: 8px; }
    .kpi-value { font-size: 28px; font-weight: 800; color: #fff; }

    /* Mapa */
    .map-container { position: relative; height: 500px; border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
    #vizor-map { width: 100%; height: 100%; background: #e5e7eb; }
    .map-controls { position: absolute; top: 20px; left: 20px; z-index: 500; display: flex; gap: 10px; background: rgba(6, 23, 34, 0.9); padding: 8px 12px; border-radius: 12px; backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,0.15); align-items: center; }
    
    /* Lista de Dispositivos */
    .device-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; }
    .device-item { background: linear-gradient(145deg, #091620 0%, #050f16 100%); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 16px 20px; transition: all 0.2s; cursor: pointer; }
    .device-item:hover { border-color: rgba(0,255,255,0.3); transform: translateY(-2px); }
    .device-head { display: flex; justify-content: space-between; margin-bottom: 8px; align-items: center; }
    .device-name { font-weight: 700; color: #fff; font-size: 15px; }
    .device-loc { font-size: 11px; color: rgba(255,255,255,0.4); display: flex; align-items: center; gap: 4px; margin-bottom: 12px; }
    .device-stats { display: flex; justify-content: space-between; align-items: flex-end; font-size: 12px; }
    .hl-metric { font-weight: 700; }

    /* Badges */
    .badge { padding: 4px 10px; border-radius: 6px; font-size: 10px; font-weight: 800; display: inline-block; text-transform: uppercase; }
    .badge.ok { background: rgba(46, 204, 113, 0.2); color: #2ecc71; border: 1px solid rgba(46, 204, 113, 0.4); }
    .badge.alerta { background: rgba(241, 196, 15, 0.2); color: #f1c40f; border: 1px solid rgba(241, 196, 15, 0.4); }
    .badge.critico { background: rgba(231, 76, 60, 0.2); color: #e74c3c; border: 1px solid rgba(231, 76, 60, 0.4); }

    /* --- MODAL ESTILIZADO --- */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index: 2000; display: none; justify-content: center; align-items: center; }
    .vizor-modal { background: #09141d; width: 750px; max-width: 95%; max-height: 90vh; border: 1px solid #0f344d; border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.7); display: flex; flex-direction: column; overflow-y: auto; }
    
    /* Header do Modal */
    .modal-header { padding: 20px 24px; border-bottom: 1px solid rgba(255,255,255,0.08); display: flex; justify-content: space-between; align-items: flex-start; }
    .modal-title-group h3 { margin: 0; font-size: 20px; color: #fff; font-weight: 700; display: flex; align-items: center; gap: 10px; }
    .modal-subtitle { color: rgba(255,255,255,0.5); font-size: 13px; margin-top: 4px; display: flex; align-items: center; gap: 6px; }
    
    /* Botão Fechar (Melhorado) */
    .btn-close { 
      background: transparent; border: none; color: rgba(255,255,255,0.4); 
      cursor: pointer; padding: 8px; border-radius: 50%; transition: 0.2s; display: flex; align-items: center; justify-content: center;
    }
    .btn-close:hover { background: rgba(255,255,255,0.1); color: #fff; }

    .modal-body { padding: 24px; }

    /* Seção Predição */
    .prediction-section { border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 20px; background: rgba(255,255,255,0.02); margin-bottom: 24px; display: flex; gap: 24px; align-items: center; }
    .pred-left { flex: 1; padding-right: 24px; border-right: 1px solid rgba(255,255,255,0.08); }
    .pred-right { flex: 1.5; display: flex; flex-direction: column; justify-content: center; gap: 12px; }
    
    .pred-title { font-size: 14px; font-weight: 700; color: aqua; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
    .risk-percent { font-size: 48px; font-weight: 800; line-height: 1; margin-bottom: 8px; color: #fff; }
    .risk-label { font-size: 12px; color: rgba(255,255,255,0.5); }
    .progress-bg { height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; width: 100%; margin-top: 12px; overflow: hidden; }
    .progress-fill { height: 100%; border-radius: 4px; transition: width 1s ease; }

    .cause-box { font-size: 13px; }
    .cause-label { color: rgba(255,255,255,0.4); font-size: 10px; text-transform: uppercase; font-weight: 700; margin-bottom: 4px; }
    .cause-text { color: #fff; font-weight: 600; display: flex; align-items: center; gap: 8px; }
    .rec-text { color: aqua; font-weight: 600; display: flex; align-items: center; gap: 8px; }

    /* Seção Métricas */
    .m-label { font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 10px; text-transform: uppercase; font-weight: 700; }
    .metrics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px; }
    .metric-card { background: #0f1b26; border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 16px; text-align: center; }
    .mc-title { font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 6px; text-transform: uppercase; }
    .mc-val { font-size: 24px; font-weight: 700; }

    .footer-row { display: flex; gap: 12px; margin-top: 16px; margin-bottom: 0; }
    .info-pill { flex: 1; background: #0f1b26; border: 1px solid rgba(255,255,255,0.08); padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; font-size: 13px; align-items: center; }
    
    /* --- GRÁFICOS HISTÓRICOS (CORREÇÃO DE LAYOUT) --- */
    .charts-container { 
      display: none; 
      margin-top: 24px; 
      padding-top: 24px; 
      border-top: 1px solid rgba(255,255,255,0.1);
      animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    .charts-title { font-size: 14px; font-weight: 700; color: aqua; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
    
    .charts-grid {
      display: grid;
      grid-template-columns: 1fr 1fr; /* Garante 2 colunas */
      gap: 16px;
    }
    
    .chart-box {
      background: rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 8px;
      padding: 12px;
      height: 180px; /* Altura fixa pra não quebrar */
      display: flex;
      flex-direction: column;
    }
    
    .chart-label { font-size: 12px; color: rgba(255,255,255,0.6); text-align: center; margin-bottom: 4px; font-weight: 600; }
    .chart-render { flex: 1; width: 100%; min-height: 0; } /* Garante que o ApexChart ocupe o espaço */

    /* Botões Modal */
    .modal-actions { display: flex; justify-content: flex-end; gap: 12px; margin-top: 24px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.08); }
    .btn-vizor { padding: 10px 20px; border-radius: 6px; font-weight: 600; font-size: 13px; cursor: pointer; border: none; transition: 0.2s; background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #fff; display: flex; align-items: center; gap: 8px; }
    .btn-vizor:hover { background: rgba(255,255,255,0.05); }
    .btn-primary { background: #00b8d4; border-color: #00b8d4; color: #000; }
    .btn-primary:hover { background: #00e5ff; border-color: #00e5ff; }

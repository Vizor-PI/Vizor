<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alterar Dados</title>
    <link rel="stylesheet" href="assets/css/css-dashboard/infoConta.css" />
    <link rel="stylesheet" href="assets/css/css-dashboard/navbar.css" />

    <link
      rel="icon"
      href="assets/imgs/logosDash/home.png"
      type="image/x-icon"
    />
  </head>

  <body onload="dadosUsuario()">
    <nav class="navbar">
      <!-- Logo -->
      <a href="#">
        <img
          src="assets/imgs/logosDash/logoDashboard.png"
          alt=""
          class="imagemLogoDashboard"
        />
      </a>

      <!-- Menu -->
      <ul id="textosNavbar">
        <li class="nav-item">
          <img
            src="assets/imgs/logosDash/home.png"
            alt=""
            id="logoNavbarDash"
          />
          <a href="inicioDash.html"> Início </a>
        </li>
        <li class="nav-item">
          <img
            src="assets/imgs/logosDash/dashboardIcon.png"
            alt=""
            id="logoNavbarDash"
          />

          <a href="dashboard.html"> Dashboard </a>
        </li>
        <li class="nav-item">
          <img
            src="assets/imgs/logosDash/avisos.png"
            alt=""
            id="logoNavbarDash"
          />

          <a href="avisoDash.html"> Avisos </a>
        </li>
        <li class="nav-item">
          <img
            src="assets/imgs/logosDash/mudarContaIcon.png"
            alt=""
            id="logoNavbarDash"
          />

          <a href="alterarDados.html"> Alterar dados </a>
        </li>
        <li class="nav-item">
          <img
            src="assets/imgs/logosDash/configIcon.png"
            alt=""
            id="logoNavbarDash"
          />

          <a href="#" style="color: aqua"> Info. da conta </a>
        </li>
      </ul>

      <!-- Botão Sair -->
      <div id="divSair">
        <img src="assets/imgs/logosDash/exitIcon.png" id="logoNavbarDash" />
        <a href="./index.html"> Sair </a>
      </div>
    </nav>

    <!-- Conteúdo principal -->
    <div class="container-xl">
      <div class="alterarDadosContainer">
        <div class="divCentralAlterarDados">
          <h1>Informações da conta</h1>
          <div class="entradasAlterarDados">
            <div class="input">
              <p class="textoInput">Nome</p>
              <input placeholder disabled id="inputNome"/>
            </div>
            <div class="input">
              <p class="textoInput" >Empresa</p>
              <input placeholder id="inputEmpresa" disabled/>
            </div>
            <div class="input">
              <p class="textoInput">CPF</p>
              <input placeholder id="inputCPF" disabled/>
            </div>
            <div class="input">
              <p class="textoInput">Telefone</p>
              <input placeholder id="inputTelefone" disabled/>
            </div>
          </div>

          <button>Deletar conta</button>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
function dadosUsuario(){
    const id = sessionStorage.ID_USUARIO;

    fetch(`/dadosUsuario/listar/${id}`, {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
    })
    .then(async (response) => {
      if (response.ok) {
        const text = await response.text();
        return text ? JSON.parse(text) : null;
      } else {
        console.error("Nenhum dado encontrado");
        return null;
      }
      console.log(response);
    })
    .then(resposta => {
      if (resposta && resposta.length > 0) {
        console.log(resposta);
        document.getElementById('inputNome').placeholder = resposta[0].NomeUsuario || "Nome não cadastrado";
        document.getElementById('inputEmpresa').placeholder = resposta[0].NomeEmpresa || "Empresa não cadastrada";
        document.getElementById('inputTelefone').placeholder = resposta[0].Telefone || "Telefone não cadastrado";
        document.getElementById('inputCPF').placeholder = resposta[0].CPF || "CPF não cadastrado";
      }
    })
    .catch(erro => {
      console.error("Erro na requisição:", erro);
    });
}
</script>
